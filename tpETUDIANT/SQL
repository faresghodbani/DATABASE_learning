-- Base de données : L2I_GHODBANI

CREATE TABLE Adresse (
    id_adresse INT(11) NOT NULL AUTO_INCREMENT,
    numero_rue INT(11) NOT NULL,
    caractère CHAR(1) NOT NULL,
    nom_rue VARCHAR(50) NOT NULL,
    nom_ville VARCHAR(35) NOT NULL,
    code_postal CHAR(5) NOT NULL,
    PRIMARY KEY (id_adresse)
);

CREATE TABLE Enseignant (
    numero_enseignant INT(30) NOT NULL,
    nom VARCHAR(30) NOT NULL,
    prenom VARCHAR(30) NOT NULL,
    age INT(11) NOT NULL,
    ville VARCHAR(30) NOT NULL,
    nombre_d_heures INT(11) NOT NULL,
    PRIMARY KEY (numero_enseignant)
);

CREATE TABLE Etudiant (
    numero_etudiant INT(11) NOT NULL,
    nom VARCHAR(30) NOT NULL,
    prenom VARCHAR(30) NOT NULL,
    id_adresse INT(11) NOT NULL,
    PRIMARY KEY (numero_etudiant),
    FOREIGN KEY (id_adresse) REFERENCES Adresse(id_adresse)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE Ue (
    code_ue CHAR(6) NOT NULL,
    libelle VARCHAR(50) NOT NULL,
    nombre_d_heures INT(11) NOT NULL,
    numero_enseignant INT(11) NOT NULL,
    PRIMARY KEY (code_ue),
    FOREIGN KEY (numero_enseignant) REFERENCES Enseignant(numero_enseignant)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE EtudiantUE (
    numero_etudiant INT(8) NOT NULL,
    code_ue CHAR(6) NOT NULL,
    note_cc TINYINT(2) NOT NULL,
    note_exam TINYINT(2) NOT NULL,
    PRIMARY KEY (numero_etudiant, code_ue),
    FOREIGN KEY (numero_etudiant) REFERENCES Etudiant(numero_etudiant)
        ON DELETE CASCADE
        ON UPDATE CASCADE,
    FOREIGN KEY (code_ue) REFERENCES Ue(code_ue)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);
